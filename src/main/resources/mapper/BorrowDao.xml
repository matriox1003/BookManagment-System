<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.dao.BorrowDao">
	<select id="queryBorrowByuId" parameterType="int" resultType="Borrow">
		SELECT *
		FROM borrow 
		WHERE u_id = #{uId}
	</select>
	
	<insert id="insertBorrow" parameterType="int">
		INSERT INTO borrow(b_id, u_id)
		VALUES(#{bId}, #{uId})
	</insert>
	
	<update id="updateBorrow" parameterType="int">
		UPDATE borrow SET bo_state = '已还' WHERE b_id = #{bId} AND u_id = #{uId}
	</update>
	
	<select id="queryPenaltyById" resultType="float">
		SELECT penalty FROM borrow WHERE b_id = #{bId} AND u_id = #{uId}
	</select>
	
	<delete id="deleteBorrow">
		DELETE FROM borrow WHERE b_id = #{bId} AND u_id = #{uId}
	</delete>
	
	<!-- 通过用户ID 查询借阅表中的图书编号 -->
	<select id="querybIdByuId" resultType="Integer">
		SELECT b_id FROM borrow WHERE u_id = #{uId}
	</select>
</mapper>